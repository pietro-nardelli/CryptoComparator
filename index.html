<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <script src="slider.js"></script> -->
<style>
  @import "index.css";
</style>


<body>

  <head>
    <title>D3 Sample</title>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
  </head>

  <body onload="twitterCss()">
    <!--<h3 style="text-align: center;">PROGETTO VA!</h3>-->

    <!-- <div class="dropdown2">
      <button onclick="myFunction2()" class="dropbtn2">Dropdown</button>
      <div id="myDropdown2" class="dropdown-content2">
      </div>
    </div> -->

    <!-- This will serve as a container for our chart. This does not have to be a div, and can in fact, just be the body if you want. -->
    <!--<div style="position: relative"><div id="my-chart"></div></div>-->
    <!-- slider -->
    <div id="scale-zoom">
      <div id="menu">
        <!--<h3>Cryptocurrency comparator</h3>-->
        <a href="."><img src="logo.png" style="width: 200px; margin-top: -5px;"></a>
        <div style="position: absolute; margin-left: 200px; margin-top: -47px; margin-bottom: 23px;">
          <div style="margin-left: 100px; display: inline-block; color: white; width: 550px;">Similarity: <span id="demo"></span>
            <input style=" width: 350px;" type="range" min="0" max="100" value="0" class="slider" id="myRange">
          </div>
          <div style="position: absoulte; margin-left: 60px; color: white; display: inline-block; width: 250px;" >
            Compare by:
            <input type="radio" id="t0_radio" name="radio_selection" value="t0" checked="checked"
              onchange="changeVisualization()">
              <label for="t0">Time zero</label>
            <input type="radio" id="year_radio" name="radio_selection" value="year" onchange="changeVisualization()">
            <label for="year">Year</label>
          </div>
          <div style="position: absoulte; margin-left: 60px; color: white; display: inline-block; width: 300px; ">
            Attribute:
            <select id="attribute_selection" onchange="changeVisualization()">
              <option value="high" style="font-family : inherit;">High</option>
              <option value="low" style="font-family : inherit;">Low</option>
              <option value="market_cap" style="font-family : inherit;">Market Cap</option>
              <option value="open" style="font-family : inherit;">Open</option>
              <option value="volume" style="font-family : inherit;">Volume</option>
              <option value="close" style="font-family : inherit;" selected>Close</option>
            </select>
            <span id="year_selection_text" hidden>Year:</span>
            <select id="year_selection" onchange="changeVisualization()" hidden>
              <option value="2017" style="font-family : inherit;">2017</option>
              <option value="2016" style="font-family : inherit;">2016</option>
              <option value="2015" style="font-family : inherit;">2015</option>
            </select>
          </div>
          <div style="position: absoulte; margin-left: 50px; color: white; display: inline;">
            Matrix order:
            <select id="order">
              <option value="count" style="font-family : inherit;">Similarity</option>
              <option value="name" style="font-family : inherit;">Name</option>
            </select>
          </div>
          <div id="info-button-container" onmouseover="stopAnimationInfo()">
            <img src="information-button.svg" id="info-button-blink">
          </div>
          <div id="graph-info">
            <span class="info-text">
              Graph information: <br><br>
              Each node in this similarity graph represent one of the top 100 cryptocurrencies,
               sorted alphabetically(clock-wise). <br>
              Each link represents a similarity between source and target, shown iff the corresponding similarity value is allowed by the slider.<br>
              The similarity evaluation is done through the attribute and the time criteria, which can be chosen by the menu above.
              Time zero means that the evaluation of the similarity is done respect to the beginning of both the cryptocurrencies(time relative),
              while selecting the year option occurs into the evalution year-wise, and only if all the values of both cryptocurrencies are non-zero for that year.
              Sub-graph and node-specific information are displayed clicking on a node of interest.

            </span>
          </div>
          <div id="matrix-info">
            <span class="info-text">
              Matrix informations:
            </span>
          </div>
          <div id="charts-info">
            <span class="info-text">
              Charts informations:
            </span>
          </div>
          <div id="scatterplot-info">
            <span class="info-text">
              Scatterplot informations:
            </span>
          </div>
        </div>
      </div>
      <div id="graph_div" data-refresh-interval="500"></div>
      <div id="matrix_div">
        <div id="legend_matrix"></div>
      </div>
      <div id="scatterplot"></div>
      <div id="twitter-div">
        <a class="twitter-timeline" data-lang="en" data-width="295" data-height="535" data-dnt="true" data-theme="dark"
          href="https://twitter.com/CryptoBoomNews">Tweets </a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
      
      <div id="dim_reduction_selection">
        Dimensionality reduction: <br />
        <select id="dim_reduction_selection_dropdown" style="float: left; margin-top: 5px;">
          <option value="mds" style="font-family : inherit;">MDS</option>
          <option value="pca" style="font-family : inherit;">PCA</option>
        </select>
    </div>
    </div>
    <div id="div_on_mydataviz"></div>
    <div id="my_dataviz" data-refresh-interval="500"></div>
    <!--<div id="my_dataviz_boxplot" data-refresh-interval="500"></div>-->
    <div id="my_dataviz_buttons">
      <button type="button" id='MyBtn'
      style="position: absoulte; width: 90px; margin-top: 25px; margin-left:-30px; font-family : inherit; z-index: 10;">Absolute <br />
      scale</button> <!-- VA MESSO DA UN'ALTRA PARTE -->
      <button type="button" id='MyBtn2' style="position: absoulte; margin-left: -22px; margin-top: 10px; font-family : inherit; " onclick="nextChartClick()">Next (1/2)</button>  <!-- VA MESSO DA UN'ALTRA PARTE -->
    </div>


  </body>

  <!-- TO USE V3 as d3v3 INSIDE d3 WITH v4-->
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script> //console.log(d3.version) ;
    d3v3 = d3; window.d3 = null</script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v2.min.js"></script>
  <script type="text/javascript" src="changeVisualizations.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="https://cdn.cryptofonts.com/1.3.0/cryptofont.css">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
  <script src="parameters.js" defer></script>
  <script src="graph.js" defer></script>
  <script src="chart.js" defer></script> <!-- ?filever=<?=filesize('/chart.js')?> -->
  <script src="matrix.js" defer></script>
  <script src="scatterplot.js" defer></script>


  <script>    
    /* Zoom for different screen width*/
    var window_width = window.innerWidth;
    if (window_width >= 1366) {
      var zoom = window_width/1536*0.74;

      document.getElementById("scale-zoom").setAttribute("style", "zoom:"+zoom+";");
      document.getElementById("div_on_mydataviz").setAttribute("style", "zoom:"+zoom+";");
      document.getElementById("my_dataviz_buttons").setAttribute("style", "zoom:"+zoom+";");
    }
    else {
      var window_width = 1366;
      var zoom = window_width/1536*0.74;

      document.getElementById("scale-zoom").setAttribute("style", "zoom:"+zoom+";");
      document.getElementById("div_on_mydataviz").setAttribute("style", "zoom:"+zoom+";");
      document.getElementById("my_dataviz_buttons").setAttribute("style", "zoom:"+zoom+";");
    }

    /* Twitter CSS when loeaded*/
    function twitterCss() {
      var cssLink = document.createElement("link");
      cssLink.href = "twitter.css";
      cssLink.rel = "stylesheet";
      cssLink.type = "text/css";
      document.getElementById('twitter-widget-0').contentDocument.body.appendChild(cssLink);
    }
    /* Next chart button change text*/
    var next_chart = false;
    function nextChartClick() {
      if(already_draw){
      if (next_chart == false) {
        next_chart = true;
        document.getElementById("MyBtn2").innerHTML = "Next (2/2)";
      }
      else {
        next_chart = false;
        document.getElementById("MyBtn2").innerHTML = "Next (1/2)";
      }
    }
  }

  function stopAnimationInfo () {
    if (document.getElementById('info-button-blink') != null) {
      document.getElementById('info-button-blink').id = 'info-button';
    }
  }
  </script>